digraph transformations {

 subgraph cluster_01_ProjectScope {
    label = "Project_Scope"
     "project_approvals" -> "spatial_framework"
"define_region_and_time" -> "spatial_framework"
"spatial_framework"  [ shape=record, label="{{ { Name | Description } | { spatial_framework |  } }}"]



 
 "hypothesis" -> "study_design"
"study_design"  [ shape=record, label="{{ { Name | Description } | { study_design |  } }}"]
"study_design" -> "project_approvals"

 
 }
 subgraph cluster_00_DataPrep {
             label = "Data_Preparation"
# subgraph cluster_02_DataPrep_HealthOutcomes {
#    label = "Data_Preparation_Outcomes"
    "outcome_source" -> "outcome_deduplication"

     "outcome_deduplication"  [ shape=record, label="{{ { Name | Description } | { outcome deduplication | need to be checked for duplicate records } }}"]
     
     "outcome_deduplication" -> "outcome_prepared"

     "groupings_concordance" -> "groupings_disease" 
     "groupings_disease" [ shape=record, label="{{ { Name | Description } | { groupings disease | grouping categories of disease type can change over time } }}"]
     
     "groupings_disease" -> "groupings"
     "groupings_age_and_sex" -> "groupings"

     "spatial_framework" -> "spatial_data_outcomes"
     "spatial_data_outcomes" -> "groupings"
     "groupings" [ shape=record, label="{{ { Name | Description } | { groupings | data grouped by disease type, age, sex, etc } }}"]
     "groupings" -> "outcome_prepared"

     "outcome_prepared" -> "outcome"


"outcome"  [ shape=record, label="{{ { Name | Description } | { exploration outcomes | The health outcome data, explored and cleaned } }}"]
"outcome" -> "outcome_clean"

 
# }

# subgraph cluster_03_DataPrep_Exposures {
#    label = "Data_Preparation_Exposures"
    "exposure1_data_provided" -> "exposure1_impute"
    "exposure1_impute"  [ shape=record, label="{{ { Name | Description } | { exposure1_impute | the  variable might have missing values } }}"]
     "exposure1_impute" -> "exposure1"
    
    "exposure1" -> "exposure"
"exposure3" -> "exposure"
"exposure2" -> "exposure"
"spatial_framework" -> "spatial_data_exposures"
"spatial_data_exposures" -> "exposure1_impute"
"exposure"  [ shape=record, label="{{ { Name | Description } | { exposure | the main environmental variable of interest plus covariates } }}"]
"exposure" -> "exposure_clean"

# }

# subgraph cluster_0301_DataPrep_Context {
#    label = "Data_Preparation_Context"
 
 "social_context" -> "context"
 "economic_context" -> "context"
 "groupings_age_and_sex" -> "population_context"
"population_context"  [ shape=record, label="{{ { Name | Description } | { population context | the human population in different age groups, by area and time (need imputation) } }}"]
 
"population_context" -> "context"
"spatial_framework" -> "spatial_data_context"
"spatial_data_context" -> "context"
"context"  [ shape=record, label="{{ { Name | Description } | { context | these provide context regarding the humans } }}"]
"context" -> "context_clean"

 
# }
}
 subgraph cluster_04_ExploratoryAnalysis {
    label = "Exploratory_Analysis"
     "outcome_clean" -> "data_summaries"
"exposure_clean" -> "data_summaries"
"context_clean" -> "data_summaries"
"data_summaries"  [ shape=record, label="{{ { Name | Description } | { data_summaries | explore each variable } }}"]
"data_summaries" -> "univariate_summaries"
"data_summaries" -> "multivariate_summaries"
"data_summaries" -> "maps"

 
 "univariate_summaries" -> "report"
"multivariate_summaries" -> "report"
"maps" -> "report"
"report"  [ shape=record, label="{{ { Name | Description } | { report | this report guides the set up phase of modelling } }}"]
"report" -> "report_eda"

 
 }

 subgraph cluster_05_Modelling {
    label = "Modelling"
     "report_eda" -> "models_1_to_n"
"models_1_to_n"  [ shape=record, label="{{ { Name | Description } | { models_1_to_n | Move from a  core model to a richer model to a simpler model } }}"]
"models_1_to_n" -> "model1_result"
"models_1_to_n" -> "model_n_results"

 
 "model1_result" -> "model_selection"
"model_n_results" -> "model_selection"
"model_selection"  [ shape=record, label="{{ { Name | Description } | { model_selection | use AIC or BIC to assess modelling } }}"]
"model_selection" -> "minimal_model"

 
 "minimal_model" -> "sensitivity"
"sensitivity"  [ shape=record, label="{{ { Name | Description } | { sensitivity |  } }}"]
"sensitivity" -> "report_modelling"

 
 }

 subgraph cluster_06_Publishing {
    label = "Publishing"
     "report_modelling" -> "publication"
"publication"  [ shape=record, label="{{ { Name | Description } | { publication | the manuscript prepared, submitted, reviewed, revised } }}"]
"publication" -> "manuscript"
"publication" -> "replication_data"

 
 "manuscript" -> "respond_to_review"
"respond_to_review"  [ shape=record, label="{{ { Name | Description } | { respond_to_review |  } }}"]
"respond_to_review" -> "new_models"
"respond_to_review" -> "response_to_review"

 
     "response_to_review" -> "archive"
"replication_data" -> "archive"
"archive"  [ shape=record, label="{{ { Name | Description } | { archive | with metadata to allow review, reproduction or re-use } }}"]
"archive" -> "archived"

 
 }

 }
